<!doctype html>
<html class="no-js" lang="zh-CN">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="next" title="Client API Documents" href="../client-api/index.html" /><link rel="prev" title="Command-line edit" href="CLI%28Command-Line-interface%29.html" />

    <!-- Generated with Sphinx 6.1.3 and Furo 2022.12.07 -->
        <title>Common - Mmkv v1.0.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Mmkv v1.0.0 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Mmkv v1.0.0 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../server/index.html">服务端</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../server/Config.html">Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Config.html#field">Field</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Data-structure.html">ReservedArray</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Data-structure.html#slist">Slist</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Data-structure.html#blist">Blist</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Data-structure.html#hashtable">HashTable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Data-structure.html#hashset">HashSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Data-structure.html#dictionary">Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Data-structure.html#avltree">AvlTree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Data-structure.html#treehashtable">TreeHashTable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Data-structure.html#avldictionary">AvlDictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Cache-Replacement.html">Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Cache-Replacement.html#policy">Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Protocol.html">MMBP request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Protocol.html#mmbp-response">MMBP response</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Expiration-Management.html">Expiration Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Expiration-Management.html#implementation">Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Recovery.html">Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server/Recovery.html#parser">Parser</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">CLI客户端</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="CLI%28Command-Line-interface%29.html">Command-line edit</a></li>
<li class="toctree-l2"><a class="reference internal" href="CLI%28Command-Line-interface%29.html#shell-command">Shell-command</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Common</a></li>
<li class="toctree-l2"><a class="reference internal" href="#expiration">Expiration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-effect">Command                                Effect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cli-command-line-interface">CLI(Command line interface)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#string">string</a></li>
<li class="toctree-l2"><a class="reference internal" href="#list">list</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sorted-set">sorted set</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hash-set">hash set</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Command              Effect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#map">map</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Command                  Effect</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../client-api/index.html">客户端API</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="common">
<h1>Common<a class="headerlink" href="#common" title="此标题的永久链接">#</a></h1>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>type key</p></td>
<td><p>获取key的数据类型</p></td>
</tr>
<tr class="row-odd"><td><p>rename key new_name</p></td>
<td><p>更换key，其数据结构不变</p></td>
</tr>
<tr class="row-even"><td><p>keyall</p></td>
<td><p>获取所有键</p></td>
</tr>
<tr class="row-odd"><td><p>del key</p></td>
<td><p>删除key，无论其数据类型</p></td>
</tr>
<tr class="row-even"><td><p>dels keys…</p></td>
<td><p>删除多个key，返回删除的键数目</p></td>
</tr>
<tr class="row-odd"><td><p>delall</p></td>
<td><p>删除所有key， 返回删除的键数目</p></td>
</tr>
<tr class="row-even"><td><p>memorystat</p></td>
<td><p>返回memory footprint信息，一般供CLI使用</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="expiration">
<h1>Expiration<a class="headerlink" href="#expiration" title="此标题的永久链接">#</a></h1>
</section>
<section id="command-effect">
<h1>Command                                Effect<a class="headerlink" href="#command-effect" title="此标题的永久链接">#</a></h1>
<p>expireafter key seconds_interval       设置key的过期时间为当前时间加上间隔（单位为second）
expiremafter key milliseconds_interval 同expireafter，但单位是millisecond
persist key                            删除key的过期时间，使之持久（没有过期时间也OK）
expiration key                         获取key对应的过期时间（毫秒）
ttl key                                获取key对应的生存时间(time to live)（毫秒）
======================================
===================================================</p>
</section>
<section id="cli-command-line-interface">
<h1>CLI(Command line interface)<a class="headerlink" href="#cli-command-line-interface" title="此标题的永久链接">#</a></h1>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>quit/exit</p></td>
<td><p>断开与mmkv server的连接，退出进程</p></td>
</tr>
<tr class="row-odd"><td><p>help</p></td>
<td><p>查看help信息</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="string">
<h1>string<a class="headerlink" href="#string" title="此标题的永久链接">#</a></h1>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>stradd key value</p></td>
<td><p>添加string pair &lt;key, value&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>strget key</p></td>
<td><p>获取key对应的字符串</p></td>
</tr>
<tr class="row-even"><td><p>strset key value</p></td>
<td><p>修改key对应的字符串为value（不存在也OK）</p></td>
</tr>
<tr class="row-odd"><td><p>strdel key</p></td>
<td><p>删除key对应的字符串</p></td>
</tr>
<tr class="row-even"><td><p>strappend key value</p></td>
<td><p>添加value到key对应字符串尾后</p></td>
</tr>
<tr class="row-odd"><td><p>strpopback key count</p></td>
<td><p>删除key对应字符串尾部count个数字符</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="list">
<h1>list<a class="headerlink" href="#list" title="此标题的永久链接">#</a></h1>
</section>
<section id="sorted-set">
<h1>sorted set<a class="headerlink" href="#sorted-set" title="此标题的永久链接">#</a></h1>
<p>以下的range均是完全闭区间，即<code class="docutils literal notranslate"><span class="pre">[left,</span> <span class="pre">right]</span></code></p>
</section>
<section id="hash-set">
<h1>hash set<a class="headerlink" href="#hash-set" title="此标题的永久链接">#</a></h1>
</section>
<section id="id1">
<h1>Command              Effect<a class="headerlink" href="#id1" title="此标题的永久链接">#</a></h1>
<p>sranddelm key        随机删除集合中的一个元素
ssize key            获取key对应集合的成员个数
sall key             获取key对应集合的所有成员
sexists key member   检验key对应的集合中是否存在成员member
sand key1 key2       获取key1和key2对应集合的交集
sandto dst key1 key2 将key1和key2对应集合的交集存到dst集合中
sandsize key1 key2   获取key1和key2对应集合的交集的大小
sor key1 key2        获取key1和key2对应集合的并集
sorto dst key1 key2  将key1和key2对应集合的并集存到dst集合中
sorsize key1 key2    获取key1和key2对应集合的并集的大小
ssub key1 key2       获取key1和key2对应集合的差集
ssubto dst key1 key2 将key1和key2对应集合的差集存到dst集合中
ssubsize key1 key2   获取key1和key2对应集合的差集的大小
====================
============================================================</p>
</section>
<section id="map">
<h1>map<a class="headerlink" href="#map" title="此标题的永久链接">#</a></h1>
</section>
<section id="id2">
<h1>Command                  Effect<a class="headerlink" href="#id2" title="此标题的永久链接">#</a></h1>
<p>mdel key field           删除key对应映射中field
mget key field           获取key对应映射中field的value
mgets key fields…        获取key对应映射中fields对应的所有value
mall key                 获取key对应映射中的所有字段和值(&lt;field, value&gt;…)
mfields key              获取key对应映射中的所有字段
mvalues key              获取key对应映射中的所有值
msize key                获取key对应映射的大小（字段值对的个数）
mexists key field        检验key对应映射中是否存在field
========================
=============================================================</p>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../client-api/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Client API Documents</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="CLI%28Command-Line-interface%29.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Command-line edit</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Conzxy
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/translations.js"></script>
    </body>
</html>